<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>English PROGRESS</title>
<style>
  :root{
    --bg:#f6f8fb; --card:#fff; --accent:#3b82f6; --accent-2:#10b981; --muted:#64748b;
    --ok:#16a34a; --bad:#ef4444; --phrase:#8b5cf6;
  }
  html,body{height:100%;margin:0;font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans JP","Hiragino Kaku Gothic ProN",Arial,sans-serif;background:var(--bg);color:#0f172a}
  .wrap{max-width:720px;margin:24px auto;padding:16px}
  .card{background:var(--card);border-radius:14px;box-shadow:0 6px 18px rgba(15,23,42,0.06);padding:18px}
  header.app-header{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
  h1{margin:0;font-size:20px;font-weight:700}
  p.sub{margin:0;color:var(--muted);font-size:13px}
  /* Mode tabs */
  .mode-tabs{display:flex;gap:8px;margin-bottom:16px;border-bottom:2px solid #e6eefc}
  .mode-tab{background:transparent;border:0;padding:12px 20px;font-weight:700;cursor:pointer;color:var(--muted);border-bottom:3px solid transparent;transition:all 0.2s}
  .mode-tab.active{color:var(--accent);border-bottom-color:var(--accent)}
  .mode-tab.phrase-mode.active{color:var(--phrase);border-bottom-color:var(--phrase)}
  /* Start menu */
  .start-list{display:flex;flex-direction:column;gap:10px;margin-top:16px}
  .btn{cursor:pointer;border:0;border-radius:10px;padding:12px 14px;font-weight:700}
  .btn-primary{background:linear-gradient(90deg,var(--accent),#2563eb);color:white}
  .btn-phrase{background:linear-gradient(90deg,var(--phrase),#7c3aed);color:white}
  .btn-ghost{background:#f8fafc;border:1px solid #e6eefc;color:#0f172a}
  .btn-group{background:#10b981;color:white}
  .mode-actions{display:flex;gap:8px;flex-wrap:wrap}
  .small{font-size:13px;color:var(--muted)}
  .group-buttons{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px;margin-top:12px}
  /* Game screen */
  .progress-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;gap:8px}
  .progress-info{display:flex;flex-direction:column;align-items:flex-start}
  .progress-bar-bg{width:100%;height:10px;background:#e6eefc;border-radius:999px;overflow:hidden;margin-top:6px}
  .progress-bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#60a5fa)}
  .question-big{font-size:1.6rem;font-weight:800;text-align:center;padding:22px 12px;background:linear-gradient(180deg,#fbfdff,#fff);border-radius:10px;margin:12px 0}
  .input-example{text-align:center;color:var(--muted);font-size:14px;margin-bottom:8px;padding:6px}
  .input-example strong{color:var(--accent);font-weight:700}
  input[type="text"]{width:100%;padding:14px;border-radius:10px;border:1px solid #dbeafe;font-size:18px;box-sizing:border-box}
  .controls{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  .feedback{margin-top:14px;padding:12px;border-radius:10px}
  .feedback.ok{background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46}
  .feedback.half{background:#fff7ed;border:1px solid #ffd8a8;color:#92400e}
  .feedback.ng{background:#fff1f2;border:1px solid #fecaca;color:#7f1d1d}
  .next-prompt{text-align:center;margin-top:12px;padding:10px;background:#f0f9ff;border-radius:8px;color:var(--accent);font-weight:700;animation: pulse 1.5s ease-in-out infinite}
  @keyframes pulse {0%, 100% { opacity: 1; } 50% { opacity: 0.6; }}
  .bottom-area{margin-top:18px;display:flex;flex-direction:column;gap:10px}
  .muted{color:var(--muted);font-size:13px}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .chip{background:#f8fafc;padding:6px 10px;border-radius:999px;border:1px solid #e6eefc;font-weight:600}
  .link-btn{background:transparent;border:0;color:var(--accent);cursor:pointer;font-weight:700;padding:6px}
  .hidden{display:none}
  .flex-col{display:flex;flex-direction:column;gap:10px}
  table{width:100%;border-collapse:collapse}
  td,th{padding:8px;border-bottom:1px solid #f1f5f9;text-align:left}
  th{font-weight:700;background:#f8fafc}
  .word-list-item{padding:10px;border-bottom:1px solid #f1f5f9;display:flex;justify-content:space-between;align-items:center}
  .word-list-item:hover{background:#f8fafc}
  .word-en{font-weight:700;color:#0f172a}
  .word-jp{color:var(--muted);font-size:14px}
  .word-ka{color:var(--accent);font-size:13px}
  .badge-new{background:#10b981;color:white;padding:4px 8px;border-radius:999px;font-size:11px;font-weight:700}
  @media (max-width:520px){.question-big{font-size:1.3rem;padding:18px} input[type="text"]{font-size:16px}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header class="app-header">
        <h1>English PROGRESS</h1>
        <p class="sub">æ—¥æœ¬èªè¨³ã‚’è¦‹ã¦ã€è‹±èªã®ã‚¹ãƒšãƒ«ã‹ã‚«ã‚¿ã‚«ãƒŠã§ç­”ãˆã‚ˆã†ã€‚è‹¦æ‰‹ã¯è‡ªå‹•ã§å„ªå…ˆå­¦ç¿’ã€‚</p>
      </header>

      <!-- MODE TABS -->
      <div class="mode-tabs">
        <button class="mode-tab active" onclick="app.switchMode('word')">ğŸ“– å˜èªãƒ¢ãƒ¼ãƒ‰</button>
        <button class="mode-tab phrase-mode" onclick="app.switchMode('phrase')">ğŸ’¬ çŸ­æ–‡ãƒ¢ãƒ¼ãƒ‰</button>
      </div>

      <!-- START MENU -->
      <div id="startScreen" class="">
        <!-- Word Mode Menu -->
        <div id="wordMenu" class="">
          <div class="small">å˜èªï¼šå­¦ç¿’æ–¹æ³•ã‚’é¸ã‚“ã§ã‚¹ã‚¿ãƒ¼ãƒˆ</div>
          <div class="start-list">
            <button class="btn btn-primary" onclick="app.begin('normal',10,'word')">å…¨å˜èªã‹ã‚‰ 10å•</button>
            <button class="btn btn-ghost" onclick="app.begin('weak10',10,'word')">è‹¦æ‰‹é›†ä¸­ 10å•</button>
            <button class="btn btn-ghost" onclick="app.begin('new',10,'word')">ğŸ†• æ–°è¦å˜èªå„ªå…ˆ 10å•</button>
          </div>

          <div style="margin-top:20px">
            <div class="small" style="margin-bottom:8px">ğŸ“š ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥å­¦ç¿’ï¼ˆ100èªãšã¤ï¼‰</div>
            <div class="group-buttons">
              <button class="btn btn-group" onclick="app.beginGroup(1)">ã‚°ãƒ«ãƒ¼ãƒ— 1<br><span style="font-size:11px">1-100</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(2)">ã‚°ãƒ«ãƒ¼ãƒ— 2<br><span style="font-size:11px">101-200</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(3)">ã‚°ãƒ«ãƒ¼ãƒ— 3<br><span style="font-size:11px">201-300</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(4)">ã‚°ãƒ«ãƒ¼ãƒ— 4<br><span style="font-size:11px">301-400</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(5)">ã‚°ãƒ«ãƒ¼ãƒ— 5<br><span style="font-size:11px">401-500</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(6)">ã‚°ãƒ«ãƒ¼ãƒ— 6<br><span style="font-size:11px">501-600</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(7)">ã‚°ãƒ«ãƒ¼ãƒ— 7<br><span style="font-size:11px">601-700</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(8)">ã‚°ãƒ«ãƒ¼ãƒ— 8<br><span style="font-size:11px">701-800</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(9)">ã‚°ãƒ«ãƒ¼ãƒ— 9<br><span style="font-size:11px">801-900</span></button>
              <button class="btn btn-group" onclick="app.beginGroup(10)">ã‚°ãƒ«ãƒ¼ãƒ— 10<br><span style="font-size:11px">901-1000</span></button>
            </div>
          </div>
        </div>

        <!-- Phrase Mode Menu -->
        <div id="phraseMenu" class="hidden">
          <div class="small">çŸ­æ–‡ï¼šå­¦ç¿’æ–¹æ³•ã‚’é¸ã‚“ã§ã‚¹ã‚¿ãƒ¼ãƒˆ</div>
          <div class="start-list">
            <button class="btn btn-phrase" onclick="app.begin('normal',10,'phrase')">å…¨çŸ­æ–‡ã‹ã‚‰ 10å•</button>
            <button class="btn btn-ghost" onclick="app.begin('weak10',10,'phrase')">è‹¦æ‰‹é›†ä¸­ 10å•</button>
            <button class="btn btn-ghost" onclick="app.begin('new',10,'phrase')">ğŸ†• æ–°è¦çŸ­æ–‡å„ªå…ˆ 10å•</button>
          </div>
        </div>

        <div style="margin-top:14px" class="small">
          <label><input type="checkbox" id="showAllJPStart" checked> ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«æ—¥æœ¬èªè¨³ã®ãƒ•ãƒ«è¡¨ç¤ºã‚’è¨±å¯</label>
        </div>

        <div style="margin-top:10px" class="small">
          ãã®ä»–ï¼š
          <button class="link-btn" onclick="app.showStats()">é€²æ—ã‚’è¦‹ã‚‹</button> / 
          <button class="link-btn" onclick="app.showWeakList()">è‹¦æ‰‹ä¸€è¦§</button> / 
          <button class="link-btn" onclick="app.showWordList()">ğŸ“š ä¸€è¦§</button>
        </div>
      </div>

      <!-- GAME SCREEN -->
      <div id="gameScreen" class="hidden">
        <div class="progress-row">
          <div class="progress-info">
            <div id="progressText" style="font-weight:800">0 / 0</div>
            <div class="muted">é€²è¡Œ</div>
          </div>
          <div style="flex:1;margin-left:12px">
            <div class="progress-bar-bg"><div id="progressBar" class="progress-bar"></div></div>
          </div>
          <div style="min-width:80px;text-align:right">
            <button class="link-btn" onclick="app.backToMenu()">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
          </div>
        </div>

        <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:24px">
          <div id="questionBox" style="font-size:28px;font-weight:800"></div>
          <button id="speakBtn" onclick="app.speakQuestion()" style="border:none;background:none;cursor:pointer;font-size:24px">ğŸ”Š</button>
        </div>

        <div class="input-example">
          ç­”ãˆæ–¹ã®ä¾‹ï¼š<strong>apple</strong>ï¼ˆè‹±å˜èªï¼‰ï¼ <strong>ã‚¢ãƒƒãƒ—ãƒ«</strong>ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰
        </div>

        <input id="answerInput" type="text" placeholder="">

        <div class="controls">
          <button class="btn btn-primary" id="checkBtn" onclick="app.handleCheck()">ç­”ãˆåˆã‚ã›</button>
          <button class="btn btn-ghost" id="skipBtn" onclick="app.handleSkip()">ã‚¹ã‚­ãƒƒãƒ—</button>
        </div>

        <div id="feedbackArea"></div>
        <div id="nextPrompt" class="hidden"></div>

        <div class="bottom-area">
          <div class="row">
            <div class="chip" id="modeChip">Mode</div>
            <div class="muted" id="hintText">â€» ã‚«ã‚¿ã‚«ãƒŠOKï¼ˆ2æ–‡å­—å·®ã¾ã§è¨±å®¹ï¼‰</div>
          </div>
          <div class="row">
            <div class="small">è¡¨ç¤º: <label><input type="checkbox" id="showAllJP" checked> æ—¥æœ¬èªè¨³ã‚’å…¨éƒ¨è¡¨ç¤º</label></div>
            <div class="small" style="margin-left:auto"><span id="itemTypeLabel">èªå½™</span>: <span id="wordCount">0</span></div>
          </div>
        </div>
      </div>

      <!-- STATS SCREEN -->
      <div id="statsScreen" class="hidden card" style="margin-top:16px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:800">å­¦ç¿’ã®è¨˜éŒ²</div>
            <div class="small">ä»Šæ—¥ï¼ç›´è¿‘7æ—¥ã§å­¦ç¿’çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™</div>
          </div>
          <div><button class="link-btn" onclick="app.hideStats()">é–‰ã˜ã‚‹</button></div>
        </div>

        <div style="margin-top:12px">
          <div class="small" id="todaySummary">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
          <table style="margin-top:8px">
            <thead><tr><th>æ—¥ä»˜</th><th>å•é¡Œæ•°</th><th>æ­£è§£ç‡</th></tr></thead>
            <tbody id="historyBody"></tbody>
          </table>
        </div>
      </div>

      <!-- WEAK LIST SCREEN -->
      <div id="weakScreen" class="hidden card" style="margin-top:16px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:800" id="weakListTitle">è‹¦æ‰‹ä¸€è¦§</div>
            <div class="small">é‡ã„ã»ã©ã‚ˆãå‡ºé¡Œã•ã‚Œã¾ã™ï¼ˆ0ã€œ5ï¼‰</div>
          </div>
          <div><button class="link-btn" onclick="app.hideWeakList()">é–‰ã˜ã‚‹</button></div>
        </div>

        <div style="margin-top:12px">
          <div id="weakBody"></div>
        </div>
      </div>

      <!-- WORD LIST SCREEN -->
      <div id="wordListScreen" class="hidden card" style="margin-top:16px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <div>
            <div style="font-weight:800" id="listTitle">ğŸ“š ç™»éŒ²ä¸€è¦§</div>
            <div class="small">ç¾åœ¨ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å…¨é …ç›®ï¼ˆ<span id="totalWordCount">0</span>ï¼‰</div>
          </div>
          <div><button class="link-btn" onclick="app.hideWordList()">é–‰ã˜ã‚‹</button></div>
        </div>

        <div style="margin-bottom:10px">
          <input type="text" id="wordSearchInput" placeholder="æ¤œç´¢..." style="width:100%;padding:10px;border-radius:8px;border:1px solid #dbeafe">
        </div>

        <div id="wordListContainer" style="max-height:500px;overflow-y:auto"></div>
      </div>

    </div>
  </div>

<script src="app.js"></script>
</body>
</html>